#!/usr/bin/env python
# -*- coding: UTF-8 -*-
import sys
import os
sys.path.append("/usr/share/openattic/")
os.environ.setdefault("DJANGO_SETTINGS_MODULE", "settings")
from django.contrib.auth.models import User, Group, Permission
from ceph.models import *
from nodb.models import *

group_dict = { 'add_pool':['add_logentry', 'change_logentry', 'delete_logentry', 'change_user', 'add_token', 'change_token', 'delete_token', 'add_cephcluster', 'change_cephcluster', 'delete_cephcluster', 'add_cepherasurecodeprofile', 'change_cepherasurecodeprofile', 'delete_cepherasurecodeprofile', 'add_cephpool', 'add_contenttype', 'change_contenttype', 'delete_contenttype', 'add_session', 'change_session', 'delete_session', 'add_site', 'change_site', 'delete_site', 'add_taskqueue', 'change_taskqueue', 'delete_taskqueue', 'change_userpreference', 'change_userprofile'], 'del_pool':['add_logentry', 'change_logentry', 'delete_logentry', 'change_user', 'add_token', 'change_token', 'delete_token', 'add_cephcluster', 'change_cephcluster', 'delete_cephcluster', 'add_cepherasurecodeprofile', 'change_cepherasurecodeprofile', 'delete_cepherasurecodeprofile', 'delete_cephpool', 'add_contenttype', 'change_contenttype', 'delete_contenttype', 'add_session', 'change_session', 'delete_session', 'add_site', 'change_site', 'delete_site', 'add_taskqueue', 'change_taskqueue', 'delete_taskqueue', 'change_userpreference', 'change_userprofile'], 'edit_pool':['add_logentry', 'change_logentry', 'delete_logentry', 'change_user', 'add_token', 'change_token', 'delete_token', 'add_cephcluster', 'change_cephcluster', 'delete_cephcluster', 'add_cepherasurecodeprofile', 'change_cepherasurecodeprofile', 'delete_cepherasurecodeprofile', 'change_cephpool', 'add_contenttype', 'change_contenttype', 'delete_contenttype', 'add_session', 'change_session', 'delete_session', 'add_site', 'change_site', 'delete_site', 'add_taskqueue', 'change_taskqueue', 'delete_taskqueue', 'change_userpreference', 'change_userprofile'], 'add_iscsi':['add_logentry', 'change_logentry', 'delete_logentry', 'change_user', 'add_token', 'change_token', 'delete_token', 'add_cephcluster', 'change_cephcluster', 'delete_cephcluster', 'add_cepherasurecodeprofile', 'change_cepherasurecodeprofile', 'delete_cepherasurecodeprofile', 'add_iscsiinterface', 'add_iscsitarget', 'add_contenttype', 'change_contenttype', 'delete_contenttype', 'add_session', 'change_session', 'delete_session', 'add_site', 'change_site', 'delete_site', 'add_taskqueue', 'change_taskqueue', 'delete_taskqueue', 'change_userpreference', 'change_userprofile'], 'add_nfs':['add_logentry', 'change_logentry', 'delete_logentry', 'change_user', 'add_token', 'change_token', 'delete_token', 'add_cephcluster', 'change_cephcluster', 'delete_cephcluster', 'add_cepherasurecodeprofile', 'change_cepherasurecodeprofile', 'delete_cepherasurecodeprofile', 'add_ganeshaexport', 'add_contenttype', 'change_contenttype', 'delete_contenttype', 'add_session', 'change_session', 'delete_session', 'add_site', 'change_site', 'delete_site', 'add_taskqueue', 'change_taskqueue', 'delete_taskqueue', 'change_userpreference', 'change_userprofile'], 'add_rbd':['add_logentry', 'change_logentry', 'delete_logentry', 'change_user', 'add_token', 'change_token', 'delete_token', 'add_cephcluster', 'change_cephcluster', 'delete_cephcluster', 'add_cepherasurecodeprofile', 'change_cepherasurecodeprofile', 'delete_cepherasurecodeprofile', 'add_cephrbd', 'add_contenttype', 'change_contenttype', 'delete_contenttype', 'add_session', 'change_session', 'delete_session', 'add_site', 'change_site', 'delete_site', 'add_taskqueue', 'change_taskqueue', 'delete_taskqueue', 'change_userpreference', 'change_userprofile'], 'del_iscsi':['add_logentry', 'change_logentry', 'delete_logentry', 'change_user', 'add_token', 'change_token', 'delete_token', 'add_cephcluster', 'change_cephcluster', 'delete_cephcluster', 'add_cepherasurecodeprofile', 'change_cepherasurecodeprofile', 'delete_cepherasurecodeprofile', 'delete_iscsiinterface', 'delete_iscsitarget', 'add_contenttype', 'change_contenttype', 'delete_contenttype', 'add_session', 'change_session', 'delete_session', 'add_site', 'change_site', 'delete_site', 'add_taskqueue', 'change_taskqueue', 'delete_taskqueue', 'change_userpreference', 'change_userprofile'], 'del_nfs':['add_logentry', 'change_logentry', 'delete_logentry', 'change_user', 'add_token', 'change_token', 'delete_token', 'add_cephcluster', 'change_cephcluster', 'delete_cephcluster', 'add_cepherasurecodeprofile', 'change_cepherasurecodeprofile', 'delete_cepherasurecodeprofile', 'delete_ganeshaexport', 'add_contenttype', 'change_contenttype', 'delete_contenttype', 'add_session', 'change_session', 'delete_session', 'add_site', 'change_site', 'delete_site', 'add_taskqueue', 'change_taskqueue', 'delete_taskqueue', 'change_userpreference', 'change_userprofile'], 'del_rbd':['add_logentry', 'change_logentry', 'delete_logentry', 'change_user', 'add_token', 'change_token', 'delete_token', 'add_cephcluster', 'change_cephcluster', 'delete_cephcluster', 'add_cepherasurecodeprofile', 'change_cepherasurecodeprofile', 'delete_cepherasurecodeprofile', 'delete_cephrbd', 'add_contenttype', 'change_contenttype', 'delete_contenttype', 'add_session', 'change_session', 'delete_session', 'add_site', 'change_site', 'delete_site', 'add_taskqueue', 'change_taskqueue', 'delete_taskqueue', 'change_userpreference', 'change_userprofile'], 'edit_iscsi':['add_logentry', 'change_logentry', 'delete_logentry', 'change_user', 'add_token', 'change_token', 'delete_token', 'add_cephcluster', 'change_cephcluster', 'delete_cephcluster', 'add_cepherasurecodeprofile', 'change_cepherasurecodeprofile', 'delete_cepherasurecodeprofile', 'change_iscsiinterface', 'change_iscsitarget', 'add_contenttype', 'change_contenttype', 'delete_contenttype', 'add_session', 'change_session', 'delete_session', 'add_site', 'change_site', 'delete_site', 'add_taskqueue', 'change_taskqueue', 'delete_taskqueue', 'change_userpreference', 'change_userprofile'], 'edit_nfs':['add_logentry', 'change_logentry', 'delete_logentry', 'change_user', 'add_token', 'change_token', 'delete_token', 'add_cephcluster', 'change_cephcluster', 'delete_cephcluster', 'add_cepherasurecodeprofile', 'change_cepherasurecodeprofile', 'delete_cepherasurecodeprofile', 'change_ganeshaexport', 'add_contenttype', 'change_contenttype', 'delete_contenttype', 'add_session', 'change_session', 'delete_session', 'add_site', 'change_site', 'delete_site', 'add_taskqueue', 'change_taskqueue', 'delete_taskqueue', 'change_userpreference', 'change_userprofile'], 'edit_rbd':['add_logentry', 'change_logentry', 'delete_logentry', 'change_user', 'add_token', 'change_token', 'delete_token', 'add_cephcluster', 'change_cephcluster', 'delete_cephcluster', 'add_cepherasurecodeprofile', 'change_cepherasurecodeprofile', 'delete_cepherasurecodeprofile', 'change_cephrbd', 'add_contenttype', 'change_contenttype', 'delete_contenttype', 'add_session', 'change_session', 'delete_session', 'add_site', 'change_site', 'delete_site', 'add_taskqueue', 'change_taskqueue', 'delete_taskqueue', 'change_userpreference', 'change_userprofile'] }

def create_group(dicts):
    try:
        for dictname in dicts.keys():
            group = Group.objects.create(name=dictname)
            group.save()
            for per in dicts[dictname]:
                permission = Permission.objects.get(codename=per)
                group.permissions.add(permission)
        print "create auth group ok"
    except:
        print "create auth group error"

create_group(group_dict)